<div *ngIf="errorMessage" class="alert alert-warning" role="alert">
    {{errorMessage}}
</div>
<div class="card mt-5">
    <div class="card-body">
        <form [formGroup]="angForm" novalidate>
            <!-- Patient Name -->
            <div class="form-group">
                <label class="col-md-4">Nome do paciente</label>
                <input type="text" class="form-control" formControlName="PatientName" #PatientName
                    [(ngModel)]="schedule.patientName" />
            </div>
            <div *ngIf="angForm.controls['PatientName'].invalid && (angForm.controls['PatientName'].dirty || angForm.controls['PatientName'].touched)"
                class="alert alert-danger">
                <div *ngIf="angForm.controls['PatientName'].errors.required">
                    O nome do paciente é obrigatório.
                </div>
            </div>
            <!-- Date Birthday -->
            <div class="form-group">
                <label class="col-md-4">Data de nascimento</label>
                <input type="date" class="form-control" formControlName="PatientBirth" #PatientBirth
                    [(ngModel)]="schedule.patientBirth" />
            </div>
            <div *ngIf="angForm.controls['PatientBirth'].invalid && (angForm.controls['PatientBirth'].dirty || angForm.controls['PatientBirth'].touched)"
                class="alert alert-danger">
                <div *ngIf="angForm.controls['PatientBirth'].errors.required">
                    A data de nascimento é obrigatória
                </div>
            </div>
            <!-- Start Schedule -->
            <div class="form-group">
                <label class="col-md-4">Início da consulta</label>
                <input type="datetime-local" class="form-control" formControlName="Start" #Start
                    [(ngModel)]="schedule.start" />
            </div>
            <div *ngIf="angForm.controls['Start'].invalid && (angForm.controls['Start'].dirty || angForm.controls['Start'].touched)"
                class="alert alert-danger">
                <div *ngIf="angForm.controls['Start'].errors.required">
                    A data de início da consulta é obrigatória
                </div>
            </div>
            <!-- Finish Schedule -->
            <div class="form-group">
                <label class="col-md-4">Fim da consulta</label>
                <input type="datetime-local" class="form-control" formControlName="Finish" #Finish
                    [(ngModel)]="schedule.finish" />
            </div>
            <div *ngIf="angForm.controls['Finish'].invalid && (angForm.controls['Finish'].dirty || angForm.controls['Finish'].touched)"
                class="alert alert-danger">
                <div *ngIf="angForm.controls['Finish'].errors.required">
                    A data de fim da consulta é obrigatória
                </div>
                <div *ngIf="angForm.controls['Finish'].errors.lessThan">
                    A data de fim da consulta deve ser maior que a de início
                </div>
            </div>
            <!-- Notes -->
            <div class="form-group">
                <label class="col-md-4">Observações</label>
                <textarea class="form-control" rows=7 cols="5" formControlName="Notes" #Notes
                    [(ngModel)]="schedule.notes"></textarea>
            </div>
            <div class="form-group">
                <button type="submit" class="btn btn-success btn-lg btn-block"
                    [disabled]="angForm.pristine || angForm.invalid" (click)="updateSchedule()">Atualizar</button>
                <button type="button" class="btn btn-danger btn-lg btn-block" routerLinkActive="active"
                    routerLink="/">Cancelar</button>
            </div>
        </form>
    </div>
</div>